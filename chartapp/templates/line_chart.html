{% load static %}
<html>
<head>
  <title>django-chartjs line chart demo</title>


  <!--[if lte IE 8]>
	<script src="{% static 'js/excanvas.js' %}"></script>
  <![endif]-->
</head>

<body>
  <h1>Welcome to Covid-19 Post-Vaccination SurveyApp!</h1>
  <div id="container" style="width: 50%; float: left;">
    <canvas id="prevaccinechart_gender" data-url="{% url 'prevaccinechart_gender' %}"></canvas>
  </div>
  <div id="container" style="width: 50%;float: left;">
    <canvas id="postvaccinechart_gender" data-url="{% url 'postvaccinechart_gender' %}"></canvas>
  </div>
  <div id="container" style="width: 50%;float: left;">
    <canvas id="prevaccinechart_race" data-url="{% url 'prevaccinechart_race' %}"></canvas>
  </div>
  <div id="container" style="width: 50%;float: left;">
    <canvas id="postvaccinechart_race" data-url="{% url 'postvaccinechart_race' %}"></canvas>
  </div>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <script>
    $(function () {
      // based on Gender
      var $prevaccinechartgender = $("#prevaccinechart_gender");
      $.ajax({
        url: $prevaccinechartgender.data("url"),
        success: function (data) {
          var ctx1 = $prevaccinechartgender[0].getContext("2d");
          
          new Chart(ctx1, {
            type: 'bar',
            data: {
              labels: data.labels,
              datasets: [{
                backgroundColor: ['rgb(69, 126, 205)','rgb(220, 121, 213)','rgb(222, 230, 105)'],
                label: "Prevaccination health issues based on gender",
                data: data.defaultdata,
              }]          
            },
            options: {
              responsive: true,
              legend: {
                position: 'top',
              },
              scales: {
                  yAxes: [{
                    ticks: {
                      beginAtZero: true
                    }
                }]
              },
              title: {
                display: false
              },
            }
          });

        }
      });

      var $postvaccinechartgender = $("#postvaccinechart_gender");
      $.ajax({
        url: $postvaccinechartgender.data("url"),
        success: function (data) {

          var ctx2 = $postvaccinechartgender[0].getContext("2d");

          new Chart(ctx2, {
            type: 'bar',
            data: {
              labels: data.labels,
              datasets: [{
                backgroundColor: ['rgb(69, 126, 205)','rgb(220, 121, 213)','rgb(222, 230, 105)'],
                label: "Postvaccination health issues based on gender",
                data: data.defaultdata,
              }]          
            },
            options: {
              responsive: true,
              legend: {
                position: 'top',
              },
              scales: {
                  yAxes: [{
                    ticks: {
                      beginAtZero: true
                    }
                }]
              },
              title: {
                display: false
              },
            }
          });

        }
      });
      // based on Race
      var $prevaccinechartrace = $("#prevaccinechart_race");
      $.ajax({
        url: $prevaccinechartrace.data("url"),
        success: function (data) {
          var ctx3 = $prevaccinechartrace[0].getContext("2d");
          new Chart(ctx3, {
            type: 'bar',
            data: {
              labels: data.labels,
              datasets: [{
                backgroundColor: ['rgb(175, 147, 204)','rgb(191, 215, 167)','rgb(140, 178, 216)','rgb(216, 140, 195)','rgb(230, 167, 220)','rgb(167, 230, 208)'],
                label: "Prevaccination health issues based on race",
                data: data.defaultdata,
              }]          
            },
            options: {
              responsive: true,
              legend: {
                position: 'top',
              },
              scales: {
                  yAxes: [{
                    ticks: {
                      beginAtZero: true
                    }
                }]
              },
              title: {
                display: false
              },
            }
          });

        }
      });

      var $postvaccinechartrace = $("#postvaccinechart_race");
      $.ajax({
        url: $postvaccinechartrace.data("url"),
        success: function (data) {
          var ctx4 = $postvaccinechartrace[0].getContext("2d");
          new Chart(ctx4, {
            type: 'bar',
            data: {
              labels: data.labels,
              datasets: [{
                backgroundColor: ['rgb(175, 147, 204)','rgb(191, 215, 167)','rgb(140, 178, 216)','rgb(216, 140, 195)','rgb(230, 167, 220)','rgb(167, 230, 208)'],
                label: "Postvaccination health issues based on race",
                data: data.defaultdata,
              }]          
            },
            options: {
              responsive: true,
              legend: {
                position: 'top',
              },
              scales: {
                  yAxes: [{
                    ticks: {
                      beginAtZero: true
                    }
                }]
              },
              title: {
                display: false
              },
            }
          });

        }
      });
    });

  </script>

</body>
</html>